<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Bartelt Angus • Lot Videos</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
:root{
  --bg:#0B0B0B;
  --text:#F2F2F2;
  --gold:#C9A45C;
}
body{
  margin:0;
  background:#111;
  color:#fff;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
}

/* ---------- TOP BAR ---------- */
.topbar{
  position:sticky;
  top:0;
  z-index:20;
  background:#0B0B0B;
  border-bottom:1px solid rgba(255,255,255,.08);
}
.btn-ghost{
  border:1px solid rgba(255,255,255,.22);
  background:rgba(255,255,255,.06);
  color:#fff;
  border-radius:14px;
  padding:10px 14px;
  font-weight:900;
  letter-spacing:.08em;
  text-transform:uppercase;
  display:inline-flex;
  align-items:center;
  gap:8px;
}

/* ---------- PLAYER ---------- */
.player-shell{
  background:#000;
  border-radius:18px;
  overflow:hidden;
  box-shadow:0 18px 50px rgba(0,0,0,.6);
}

/* header */
.player-head{
  padding:14px 16px;
  border-bottom:1px solid rgba(255,255,255,.1);
}
.player-title{
  font-weight:900;
  letter-spacing:.08em;
  text-transform:uppercase;
}

/* ---------- VIDEO FIX (CRITICAL) ---------- */
.video-ratio{
  position:relative;
  width:100%;
  padding-top:56.25%; /* 16:9 */
  background:#000;
  overflow:hidden;
}

/* FORCE iframe to fill box (iOS fix) */
.video-ratio iframe{
  position:absolute !important;
  inset:0 !important;
  width:100% !important;
  height:100% !important;
  display:block;
  border:0;
}

/* BLOCK TOUCHES so iOS never shows native controls */
.video-ratio iframe{
  pointer-events:none;
}

/* ---------- CONTROLS ---------- */
.player-actions{
  padding:12px 14px;
  background:#0B0B0B;
  border-top:1px solid rgba(255,255,255,.1);
  display:flex;
  flex-direction:column;
  gap:12px;
}

.scrub-wrap{
  display:flex;
  align-items:center;
  gap:10px;
}
.btn-play{
  width:44px;
  height:44px;
  border-radius:14px;
  border:1px solid rgba(255,255,255,.2);
  background:rgba(255,255,255,.08);
  color:#fff;
}
.scrub{
  flex:1;
  accent-color:var(--gold);
}
.timecode{
  min-width:90px;
  font-weight:900;
  font-size:.78rem;
  color:rgba(255,255,255,.7);
  text-align:right;
}

.nav-row{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
}
.btn-nav{
  padding:10px 14px;
  border-radius:14px;
  border:1px solid rgba(255,255,255,.2);
  background:rgba(255,255,255,.06);
  color:#fff;
  font-weight:900;
  letter-spacing:.08em;
  text-transform:uppercase;
}
.lot-counter{
  font-weight:900;
  letter-spacing:.1em;
  color:rgba(255,255,255,.75);
  white-space:nowrap;
}
</style>
</head>

<body>

<!-- TOP BAR -->
<div class="topbar">
  <div class="container py-3 d-flex justify-content-between align-items-center">
    <strong>BARTELT ANGUS • LOT VIDEOS</strong>
    <div class="d-flex gap-2">
      <a class="btn-ghost" href="sale-bartelt.html"><i class="fa-solid fa-arrow-left"></i> Sale Info</a>
      <a class="btn-ghost" href="./index.html#sales"><i class="fa-solid fa-house"></i> Home</a>
    </div>
  </div>
</div>

<!-- PLAYER -->
<main class="py-4">
<div class="container">

<div class="player-shell">

  <div class="player-head">
    <div id="playerTitle" class="player-title">Lot 1 • Bull</div>
  </div>

  <div class="video-ratio">
    <iframe id="playerFrame"
      allow="autoplay; fullscreen"
      referrerpolicy="strict-origin-when-cross-origin">
    </iframe>
  </div>

  <div class="player-actions">

    <!-- SCRUB ROW -->
    <div class="scrub-wrap">
      <button id="playBtn" class="btn-play">
        <i id="playIcon" class="fa-solid fa-pause"></i>
      </button>
      <input id="scrub" class="scrub" type="range" min="0" max="1000" value="0">
      <div id="timecode" class="timecode">0:00 / 0:00</div>
    </div>

    <!-- NAV ROW -->
    <div class="nav-row">
      <button id="prevBtn" class="btn-nav"><i class="fa-solid fa-arrow-left"></i> Prev</button>
      <div id="lotCounter" class="lot-counter">Lot 1 / 19</div>
      <button id="nextBtn" class="btn-nav">Next <i class="fa-solid fa-arrow-right"></i></button>
    </div>

  </div>

</div>
</div>
</main>

<script src="https://player.vimeo.com/api/player.js"></script>

<script>
const lots=[
{lot:1,meta:"Bull",vimeo:"1161993796"},
{lot:2,meta:"Bull",vimeo:"1161993835"},
{lot:3,meta:"Bull",vimeo:"1161993947"},
{lot:4,meta:"Bull",vimeo:"1161994078"},
{lot:5,meta:"Bull",vimeo:"1161994197"},
{lot:6,meta:"Bull",vimeo:"1161994298"},
{lot:7,meta:"Bull",vimeo:"1161994440"},
{lot:8,meta:"Bull",vimeo:"1161994525"},
{lot:9,meta:"Bull",vimeo:"1161994645"},
{lot:10,meta:"Bull",vimeo:"1161994737"},
{lot:11,meta:"Bull",vimeo:"1161994854"},
{lot:12,meta:"Bull",vimeo:"1161994977"},
{lot:13,meta:"Bull",vimeo:"1161995140"},
{lot:14,meta:"Bull",vimeo:"1161995267"},
{lot:15,meta:"Bull",vimeo:"1161995435"},
{lot:16,meta:"Heifer",vimeo:"1161995589"},
{lot:17,meta:"Heifer",vimeo:"1161995681"},
{lot:18,meta:"Heifer",vimeo:"1161995766"},
{lot:19,meta:"Heifer",vimeo:"1161995824"},
];

let idx=0,player,duration=0,drag=false;

const frame=document.getElementById("playerFrame");
const playBtn=document.getElementById("playBtn");
const playIcon=document.getElementById("playIcon");
const scrub=document.getElementById("scrub");
const timecode=document.getElementById("timecode");
const title=document.getElementById("playerTitle");
const counter=document.getElementById("lotCounter");

function embed(id){
  return `https://player.vimeo.com/video/${id}?background=1&autoplay=1&muted=1&loop=1&playsinline=1`;
}

async function load(i){
  idx=i;
  const l=lots[i];
  title.textContent=`Lot ${l.lot} • ${l.meta}`;
  counter.textContent=`Lot ${l.lot} / ${lots.length}`;
  frame.src=embed(l.vimeo);

  setTimeout(async()=>{
    player=new Vimeo.Player(frame);
    duration=await player.getDuration();
    scrub.value=0;
    timecode.textContent=`0:00 / ${fmt(duration)}`;

    player.on("timeupdate",e=>{
      if(!drag){
        scrub.value=(e.seconds/duration)*1000;
        timecode.textContent=`${fmt(e.seconds)} / ${fmt(duration)}`;
      }
    });
  },60);
}

function fmt(s){
  s=Math.floor(s);
  return `${Math.floor(s/60)}:${String(s%60).padStart(2,"0")}`;
}

playBtn.onclick=async()=>{
  const p=await player.getPaused();
  p?player.play():player.pause();
  playIcon.className=p?"fa-solid fa-pause":"fa-solid fa-play";
};

scrub.oninput=()=>{
  drag=true;
  const t=(scrub.value/1000)*duration;
  timecode.textContent=`${fmt(t)} / ${fmt(duration)}`;
};

scrub.onchange=()=>{
  drag=false;
  player.setCurrentTime((scrub.value/1000)*duration);
};

document.getElementById("prevBtn").onclick=()=>idx>0&&load(idx-1);
document.getElementById("nextBtn").onclick=()=>idx<lots.length-1&&load(idx+1);

load(0);
</script>

</body>
</html>
